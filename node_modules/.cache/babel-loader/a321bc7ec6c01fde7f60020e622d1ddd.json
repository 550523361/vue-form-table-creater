{"remainingRequest":"/Users/iriskang/xkfeng/formAndTableCreater/vue-form-table-creater/node_modules/thread-loader/dist/cjs.js!/Users/iriskang/xkfeng/formAndTableCreater/vue-form-table-creater/node_modules/babel-loader/lib/index.js!/Users/iriskang/xkfeng/formAndTableCreater/vue-form-table-creater/node_modules/eslint-loader/index.js??ref--13-0!/Users/iriskang/xkfeng/formAndTableCreater/vue-form-table-creater/src/components/remoteService/backendService.js","dependencies":[{"path":"/Users/iriskang/xkfeng/formAndTableCreater/vue-form-table-creater/src/components/remoteService/backendService.js","mtime":1553063302820},{"path":"/Users/iriskang/xkfeng/formAndTableCreater/vue-form-table-creater/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/iriskang/xkfeng/formAndTableCreater/vue-form-table-creater/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/iriskang/xkfeng/formAndTableCreater/vue-form-table-creater/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/iriskang/xkfeng/formAndTableCreater/vue-form-table-creater/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.array.for-each\";\nimport _Object$keys from \"/Users/iriskang/xkfeng/formAndTableCreater/vue-form-table-creater/node_modules/@babel/runtime-corejs2/core-js/object/keys\";\nimport _Object$assign from \"/Users/iriskang/xkfeng/formAndTableCreater/vue-form-table-creater/node_modules/@babel/runtime-corejs2/core-js/object/assign\";\n\n/**\n * Created by Administrator on 2017/7/11.\n */\nimport { Message } from 'element-ui';\nimport axios from \"axios\";\nimport { setCookie, getCookie } from '../cookie/cookie';\n\nfunction getData(config) {\n  var defaultConfig = {\n    // `url` is the server URL that will be used for the request\n    url: '',\n    // `method` is the request method to be used when making the request\n    method: 'get',\n    // default\n    // `baseURL` will be prepended to `url` unless `url` is absolute.\n    // It can be convenient to set `baseURL` for an instance of axios to pass relative URLs\n    // to methods of that instance.\n    baseURL: '',\n    // `transformRequest` allows changes to the request data before it is sent to the server\n    // This is only applicable for request methods 'PUT', 'POST', and 'PATCH'\n    // The last function in the array must return a string or an ArrayBuffer\n    transformRequest: [function (data) {\n      // Do whatever you want to transform the data\n      return data;\n    }],\n    // `transformResponse` allows changes to the response data to be made before\n    // it is passed to then/catch\n    transformResponse: [function (data) {\n      // Do whatever you want to transform the data\n      return data;\n    }],\n    // `headers` are custom headers to be sent\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest'\n    },\n    // `params` are the URL parameters to be sent with the request\n    params: {},\n    // `paramsSerializer` is an optional function in charge of serializing `params`\n    // (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)\n    paramsSerializer: function paramsSerializer(params) {\n      return Qs.stringify(params, {\n        arrayFormat: 'brackets'\n      });\n    },\n    // `data` is the data to be sent as the request body\n    // Only applicable for request methods 'PUT', 'POST', and 'PATCH'\n    // When no `transformRequest` is set, must be a string, an ArrayBuffer or a hash\n    data: {\n      firstName: 'Fred'\n    },\n    // `timeout` specifies the number of milliseconds before the request times out.\n    // If the request takes longer than `timeout`, the request will be aborted.\n    timeout: 1000,\n    // `withCredentials` indicates whether or not cross-site Access-Control requests\n    // should be made using credentials\n    withCredentials: false,\n    // default\n    // `adapter` allows custom handling of requests which makes testing easier.\n    // Call `resolve` or `reject` and supply a valid response (see [response docs](#response-api)).\n    adapter: function adapter(resolve, reject, config) {\n      /* ... */\n    },\n    // `auth` indicates that HTTP Basic auth should be used, and supplies credentials.\n    // This will set an `Authorization` header, overwriting any existing\n    // `Authorization` custom headers you have set using `headers`.\n    auth: {\n      /*username: 'janedoe',\n      password: 's00pers3cret'*/\n    },\n    // `responseType` indicates the type of data that the server will respond with\n    // options are 'arraybuffer', 'blob', 'document', 'json', 'text'\n    responseType: 'json',\n    // default\n    // `xsrfCookieName` is the name of the cookie to use as a value for xsrf token\n    xsrfCookieName: 'XSRF-TOKEN',\n    // default\n    // `xsrfHeaderName` is the name of the http header that carries the xsrf token value\n    xsrfHeaderName: 'X-XSRF-TOKEN',\n    // default\n    // `progress` allows handling of progress events for 'POST' and 'PUT uploads'\n    // as well as 'GET' downloads\n    progress: function progress(progressEvent) {// Do whatever you want with the native progress event\n    }\n  };\n  config = _Object$assign(config, {\n    //baseURL:'http://101.200.80.219:8012'\n    //baseURL:'http://10.200.0.52:8200'\n    baseURL: '/api-backend'\n  }); //config=Object.create(config,defaultConfig);\n\n  /*if(config.url.indexOf(\"?\")>=0){\n      config.url+=\"&hostName=\"+window.location.hostname\n  }else{\n      config.url+=\"?hostName=\"+window.location.hostname\n  }*/\n\n  return axios(config).then(function (data) {\n    if (data.data.code === 106) {\n      setCookie('token', '', 0);\n      setCookie('username', '', 0);\n      alert('登录信息已失效  请刷新页面重新登录'); // setTimeout(()=>{\n      //     window.location.reload()\n      // },100)\n    }\n\n    return data.data;\n  }, function (error) {\n    console.log(error);\n    Message({\n      message: '数据请求错误，请稍后重试',\n      type: 'error'\n    });\n  });\n}\n\nfunction download(config) {\n  var queryParam = \"\";\n  var url = config.url;\n\n  if (config.params) {\n    var paramKeyArray = _Object$keys(config.params);\n\n    paramKeyArray.forEach(function (key, index) {\n      queryParam += key + '=' + config.params[key] + (index == paramKeyArray.length - 1 ? '' : '&');\n    });\n  }\n\n  if (config.url && config.url.indexOf(\"?\") >= 0 && queryParam) {\n    url += \"&\" + queryParam;\n  } else if (config.url && config.url.indexOf(\"?\") == -1 && queryParam) {\n    url += \"?\" + queryParam;\n  }\n\n  console.log(\"downloadUrl:\", \"/api-backend\" + url);\n  window.open(\"/api-backend\" + url);\n}\n\nexport default {\n  getData: getData,\n  download: download\n};",{"version":3,"sources":["/Users/iriskang/xkfeng/formAndTableCreater/vue-form-table-creater/src/components/remoteService/backendService.js"],"names":["Message","axios","setCookie","getCookie","getData","config","defaultConfig","url","method","baseURL","transformRequest","data","transformResponse","headers","params","paramsSerializer","Qs","stringify","arrayFormat","firstName","timeout","withCredentials","adapter","resolve","reject","auth","responseType","xsrfCookieName","xsrfHeaderName","progress","progressEvent","then","code","alert","error","console","log","message","type","download","queryParam","paramKeyArray","forEach","key","index","length","indexOf","window","open"],"mappings":";;;;;AAAA;;;AAGA,SAASA,OAAT,QAAwB,YAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,EAAkBC,SAAlB,QAAkC,kBAAlC;;AAEA,SAASC,OAAT,CAAiBC,MAAjB,EAAyB;AACrB,MAAIC,aAAa,GAAC;AACd;AACAC,IAAAA,GAAG,EAAE,EAFS;AAGd;AACAC,IAAAA,MAAM,EAAE,KAJM;AAIC;AACf;AACA;AACA;AACAC,IAAAA,OAAO,EAAE,EARK;AASd;AACA;AACA;AACAC,IAAAA,gBAAgB,EAAE,CAAC,UAAUC,IAAV,EAAgB;AAC/B;AACA,aAAOA,IAAP;AACH,KAHiB,CAZJ;AAgBd;AACA;AACAC,IAAAA,iBAAiB,EAAE,CAAC,UAAUD,IAAV,EAAgB;AAChC;AACA,aAAOA,IAAP;AACH,KAHkB,CAlBL;AAsBd;AACAE,IAAAA,OAAO,EAAE;AAAC,0BAAoB;AAArB,KAvBK;AAwBd;AACAC,IAAAA,MAAM,EAAE,EAzBM;AA2Bd;AACA;AACAC,IAAAA,gBAAgB,EAAE,0BAASD,MAAT,EAAiB;AAC/B,aAAOE,EAAE,CAACC,SAAH,CAAaH,MAAb,EAAqB;AAACI,QAAAA,WAAW,EAAE;AAAd,OAArB,CAAP;AACH,KA/Ba;AAgCd;AACA;AACA;AACAP,IAAAA,IAAI,EAAE;AACFQ,MAAAA,SAAS,EAAE;AADT,KAnCQ;AAsCd;AACA;AACAC,IAAAA,OAAO,EAAE,IAxCK;AAyCd;AACA;AACAC,IAAAA,eAAe,EAAE,KA3CH;AA2CU;AACxB;AACA;AACAC,IAAAA,OAAO,EAAE,iBAAUC,OAAV,EAAmBC,MAAnB,EAA2BnB,MAA3B,EAAmC;AACxC;AACH,KAhDa;AAiDd;AACA;AACA;AACAoB,IAAAA,IAAI,EAAE;AACF;;AADE,KApDQ;AAwDd;AACA;AACAC,IAAAA,YAAY,EAAE,MA1DA;AA0DQ;AACtB;AACAC,IAAAA,cAAc,EAAE,YA5DF;AA4DgB;AAC9B;AACAC,IAAAA,cAAc,EAAE,cA9DF;AA8DkB;AAChC;AACA;AACAC,IAAAA,QAAQ,EAAE,kBAASC,aAAT,EAAwB,CAC9B;AACH;AAnEa,GAAlB;AAqEAzB,EAAAA,MAAM,GAAG,eAAcA,MAAd,EAAqB;AAC1B;AACA;AACAI,IAAAA,OAAO,EAAC;AAHkB,GAArB,CAAT,CAtEqB,CA2ErB;;AACA;;;;;;AAKA,SAAOR,KAAK,CAACI,MAAD,CAAL,CAAc0B,IAAd,CAAmB,UAAUpB,IAAV,EAAgB;AACtC,QAAGA,IAAI,CAACA,IAAL,CAAUqB,IAAV,KAAmB,GAAtB,EAA0B;AACtB9B,MAAAA,SAAS,CAAC,OAAD,EAAS,EAAT,EAAY,CAAZ,CAAT;AACAA,MAAAA,SAAS,CAAC,UAAD,EAAY,EAAZ,EAAe,CAAf,CAAT;AACA+B,MAAAA,KAAK,CAAC,oBAAD,CAAL,CAHsB,CAItB;AACA;AACA;AACH;;AACD,WAAOtB,IAAI,CAACA,IAAZ;AACH,GAVM,EAUL,UAAUuB,KAAV,EAAiB;AACfC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAlC,IAAAA,OAAO,CAAC;AACJqC,MAAAA,OAAO,EAAE,cADL;AAEJC,MAAAA,IAAI,EAAE;AAFF,KAAD,CAAP;AAIH,GAhBM,CAAP;AAiBH;;AAGD,SAASC,QAAT,CAAkBlC,MAAlB,EAA0B;AACtB,MAAImC,UAAU,GAAC,EAAf;AACA,MAAIjC,GAAG,GAACF,MAAM,CAACE,GAAf;;AACA,MAAGF,MAAM,CAACS,MAAV,EAAiB;AACb,QAAI2B,aAAa,GAAC,aAAYpC,MAAM,CAACS,MAAnB,CAAlB;;AACA2B,IAAAA,aAAa,CAACC,OAAd,CAAsB,UAACC,GAAD,EAAKC,KAAL,EAAa;AAC/BJ,MAAAA,UAAU,IAAEG,GAAG,GAAC,GAAJ,GAAQtC,MAAM,CAACS,MAAP,CAAc6B,GAAd,CAAR,IAA4BC,KAAK,IAAEH,aAAa,CAACI,MAAd,GAAqB,CAA5B,GAA8B,EAA9B,GAAiC,GAA7D,CAAZ;AACH,KAFD;AAGH;;AACD,MAAGxC,MAAM,CAACE,GAAP,IAAYF,MAAM,CAACE,GAAP,CAAWuC,OAAX,CAAmB,GAAnB,KAAyB,CAArC,IAAwCN,UAA3C,EAAsD;AAClDjC,IAAAA,GAAG,IAAE,MAAIiC,UAAT;AACH,GAFD,MAEM,IAAGnC,MAAM,CAACE,GAAP,IAAYF,MAAM,CAACE,GAAP,CAAWuC,OAAX,CAAmB,GAAnB,KAAyB,CAAC,CAAtC,IAAyCN,UAA5C,EAAuD;AACzDjC,IAAAA,GAAG,IAAE,MAAIiC,UAAT;AACH;;AACDL,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA2B,iBAAe7B,GAA1C;AACAwC,EAAAA,MAAM,CAACC,IAAP,CAAY,iBAAezC,GAA3B;AACH;;AAED,eAAe;AAACH,EAAAA,OAAO,EAAPA,OAAD;AAASmC,EAAAA,QAAQ,EAARA;AAAT,CAAf","sourcesContent":["/**\n * Created by Administrator on 2017/7/11.\n */\nimport { Message } from 'element-ui';\nimport axios from \"axios\";\nimport {setCookie,getCookie} from '../cookie/cookie'\n\nfunction getData(config) {\n    let defaultConfig={\n        // `url` is the server URL that will be used for the request\n        url: '',\n        // `method` is the request method to be used when making the request\n        method: 'get', // default\n        // `baseURL` will be prepended to `url` unless `url` is absolute.\n        // It can be convenient to set `baseURL` for an instance of axios to pass relative URLs\n        // to methods of that instance.\n        baseURL: '',\n        // `transformRequest` allows changes to the request data before it is sent to the server\n        // This is only applicable for request methods 'PUT', 'POST', and 'PATCH'\n        // The last function in the array must return a string or an ArrayBuffer\n        transformRequest: [function (data) {\n            // Do whatever you want to transform the data\n            return data;\n        }],\n        // `transformResponse` allows changes to the response data to be made before\n        // it is passed to then/catch\n        transformResponse: [function (data) {\n            // Do whatever you want to transform the data\n            return data;\n        }],\n        // `headers` are custom headers to be sent\n        headers: {'X-Requested-With': 'XMLHttpRequest'},\n        // `params` are the URL parameters to be sent with the request\n        params: {\n        },\n        // `paramsSerializer` is an optional function in charge of serializing `params`\n        // (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)\n        paramsSerializer: function(params) {\n            return Qs.stringify(params, {arrayFormat: 'brackets'})\n        },\n        // `data` is the data to be sent as the request body\n        // Only applicable for request methods 'PUT', 'POST', and 'PATCH'\n        // When no `transformRequest` is set, must be a string, an ArrayBuffer or a hash\n        data: {\n            firstName: 'Fred'\n        },\n        // `timeout` specifies the number of milliseconds before the request times out.\n        // If the request takes longer than `timeout`, the request will be aborted.\n        timeout: 1000,\n        // `withCredentials` indicates whether or not cross-site Access-Control requests\n        // should be made using credentials\n        withCredentials: false, // default\n        // `adapter` allows custom handling of requests which makes testing easier.\n        // Call `resolve` or `reject` and supply a valid response (see [response docs](#response-api)).\n        adapter: function (resolve, reject, config) {\n            /* ... */\n        },\n        // `auth` indicates that HTTP Basic auth should be used, and supplies credentials.\n        // This will set an `Authorization` header, overwriting any existing\n        // `Authorization` custom headers you have set using `headers`.\n        auth: {\n            /*username: 'janedoe',\n            password: 's00pers3cret'*/\n        },\n        // `responseType` indicates the type of data that the server will respond with\n        // options are 'arraybuffer', 'blob', 'document', 'json', 'text'\n        responseType: 'json', // default\n        // `xsrfCookieName` is the name of the cookie to use as a value for xsrf token\n        xsrfCookieName: 'XSRF-TOKEN', // default\n        // `xsrfHeaderName` is the name of the http header that carries the xsrf token value\n        xsrfHeaderName: 'X-XSRF-TOKEN', // default\n        // `progress` allows handling of progress events for 'POST' and 'PUT uploads'\n        // as well as 'GET' downloads\n        progress: function(progressEvent) {\n            // Do whatever you want with the native progress event\n        }\n    };\n    config = Object.assign(config,{\n        //baseURL:'http://101.200.80.219:8012'\n        //baseURL:'http://10.200.0.52:8200'\n        baseURL:'/api-backend'\n    });\n    //config=Object.create(config,defaultConfig);\n    /*if(config.url.indexOf(\"?\")>=0){\n        config.url+=\"&hostName=\"+window.location.hostname\n    }else{\n        config.url+=\"?hostName=\"+window.location.hostname\n    }*/\n    return axios(config).then(function (data) {\n        if(data.data.code === 106){\n            setCookie('token','',0);\n            setCookie('username','',0);\n            alert('登录信息已失效  请刷新页面重新登录')\n            // setTimeout(()=>{\n            //     window.location.reload()\n            // },100)\n        }\n        return data.data;\n    },function (error) {\n        console.log(error)\n        Message({\n            message: '数据请求错误，请稍后重试',\n            type: 'error'\n        });\n    });\n}\n\n\nfunction download(config) {\n    var queryParam=\"\";\n    let url=config.url;\n    if(config.params){\n        let paramKeyArray=Object.keys(config.params);\n        paramKeyArray.forEach((key,index)=>{\n            queryParam+=key+'='+config.params[key]+(index==paramKeyArray.length-1?'':'&');\n        })\n    }\n    if(config.url&&config.url.indexOf(\"?\")>=0&&queryParam){\n        url+=\"&\"+queryParam;\n    }else if(config.url&&config.url.indexOf(\"?\")==-1&&queryParam){\n        url+=\"?\"+queryParam;\n    }\n    console.log(\"downloadUrl:\",\"/api-backend\"+url)\n    window.open(\"/api-backend\"+url)\n}\n\nexport default {getData,download};"]}]}